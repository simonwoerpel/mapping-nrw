"use strict";var baseMap=d3.playbooks.choroplethMap({elementId:"base-map",responsiveSvg:!0,geoDataUrl:"./data/nrw.topo.json",dataUrl:"./data/nrw-gender.csv",isTopojson:!0,topojsonLayerName:"gemeinden_simplify20",getId:function(e){return e.properties.RS.substring(1)},color:d3.schemeBuPu[9],width:800,height:800,cssNamespace:"nrw-map-base"}).render().infobox({element:".nrw-map-base__infobox",template:"<h3>{GEN}</h3>\n    <p><strong>Anteil: {value} %</strong></p>\n    <p>Bevölkerung: {population}</p>"});baseMap.ready().then(function(){var e=baseMap.features(),n=[[null,null,null,"Münster","Bielefeld"],["Oberhausen","Bottrop","Gelsenkirchen","Herne","Hamm"],["Duisburg","Mülheim an der Ruhr","Essen","Bochum","Dortmund"],["Mönchengladbach","Krefeld","Düsseldorf","Solingen","Wuppertal"],["Köln","Leverkusen","Remscheid","Hagen","Bonn"]],a=d3.extent(e.map(function(e){return e.value})),t=d3.scaleQuantile().domain(a).range(baseMap.color()),r={};e.filter(function(e){return"Stadt"===e.BEZ}).map(function(e){return r[e.GEN]=e});var s=50,p=50,o=function(e){return e.append("div").attr("class","nrw-map-single__wrapper svg-container-responsive").append("svg").attr("width",s).attr("height",p).attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 "+s+" "+p).classed("svg-content-responsive",!0).classed("nrw-map-single__svg",!0).append("g")},l=function(e){return d3.geoPath().projection(d3.geoMercator().fitSize([s,p],e))},i=d3.format(".1f");n.map(function(e,n){var a=d3.select(".nrw-map-singles").append("div").attr("class","nrw-map-singles__row");if(0===n){var s=a.append("div").attr("class","nrw-map__legend"),p=t.quantiles();s.append("h3").text("Anteil weiblicher Bevölkerung in %"),s.append("div").attr("class","nrw-map__legend-row nrw-map__legend-row--labels").selectAll("span").data(p).enter().append("span").text(function(e){return i(e)}),s.append("div").attr("class","nrw-map__legend-row nrw-map__legend-row--colors").selectAll("span").data(p).enter().append("span").style("background-color",function(e){return t(e)})}e.map(function(e){if(e){var n=r[e],s=l(n),p=function(e){return"Mülheim an der Ruhr"===e?"Mülheim":"Mönchengladbach"===e?"Gladbach":e},d=a.append("div").attr("id","rs-"+n.RS).attr("class","nrw-map-single");d.append("h3").text(p(n.GEN)),d.append("p").text(i(n.value)+" %");var u=o(d);u.selectAll("path").data([n]).enter().append("path").attr("class","nrw-map-single__feature").attr("d",s).attr("fill",function(e){return t(e.value)}).on("mouseover",function(e){baseMap.hilight(e.RS.substring(1)),baseMap.control().trigger("update_infobox",e)}).on("mouseout",function(e){baseMap.unhilight(),baseMap.control().trigger("empty_infobox")})}else;})})});
